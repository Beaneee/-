## 소스코드의 타입


### 1. 전역 코드

- 전역 코드는 전역 변수를 관리하기 위해 최상위 스코프인 전역 스코프를 생성해야 한다.
- `var` 키워드로 선언된 전역 변수와 함수 선언문으로 정의된 전역 함수를 전역 객체의 프로퍼티와 메서드로 바인딩하고 참조하기 위해 전역 객체와 연결되어야 한다.
- 전역 코드가 평가되면 전역 실행 컨텍스트가 생성된다.

### 2. 함수 코드

- 함수 코드는 지역 스코프를 생성하고 지역 변수, 매개변수, `arguments` 객체를 관리해야 한다.
- 생성한 지역 스코프를 전역 스코프에서 시작하는 스코프 체인의 일원으로 연결해야 한다.
- 함수 코드가 평가되면 함수 실행 컨텍스트가 생성된다.

### 3. `eval` 코드

- `eval` 코드는 strict mode에서 자신만의 독자적인 스코프를 생성한다. `eval` 코드가 평가되면 `eval` 실행 컨텍스트가 생성된다.

### 4. 모듈 코드

- 모듈 코드는 모듈별로 독립적인 모듈 스코프를 생성한다.
- 모듈 코드가 평가되면 모듈 실행 컨텍스트가 생성된다.

## 소스코드의 평가와 실행


![https://velog.velcdn.com/images/pipi/post/31e99f3a-69a4-4fe1-b1a6-ed30382157a3/image.png](https://velog.velcdn.com/images/pipi/post/31e99f3a-69a4-4fe1-b1a6-ed30382157a3/image.png)

`소스코드 평가 과정` 에서는 실행 컨텍스트를 생성하고 변수, 함수 등의 선언문만 먼저 실행하여 생성된 변수나 함수 식별자를 키로 샐행 컨텍스트가 관리하는 스코프(렉시컬 환경의 환경 레코드)에 등록한다.

`소스코드 실행 과정` 에서는 소스코드 실행에 필요한 정보, 변수나 함수의 참조를 실행 컨텍스트가 관리하는 스코프에서 검색해서 취득한다.

`소스코드 실행 결과` 는 다시 실행 컨텍스트가 관리하는 스코프에 등록된다.

## 실행 컨텍스트의 역할


> 코드가 실행되는 환경을 정의하는 개념으로, 자바스크립트 코드가 어떻게 해석되고 실행되는지를 결정한다.
>

구체적으로 말하자면, 실행 컨텍스트는 식별자를 등록하고 관리하는 스코프와 코드 실행 순서 관리를 구현한 내부 메커니즘으로, 모든 코드는 실행 컨텍스트를 통해 실행되고 관리된다.

## 실행 컨텍스트 스택


```jsx
const x = 1;

function foo() {
	const y = 2;
	
	function bar() {
		const z = 3;
		console.log(x + y + z);
	}
	bar();
}

foo(); // 6
```

![https://velog.velcdn.com/images/dhksl823/post/348f2731-3076-4f19-8af4-b25fbeb3b5e6/image.png](https://velog.velcdn.com/images/dhksl823/post/348f2731-3076-4f19-8af4-b25fbeb3b5e6/image.png)

실행 컨텍스트 스택은 코드의 실행 순서를 관리한다. 실행 컨텍스트 스택의 최상위에 존재하는 실행 컨텍스트는 언제나 현재 실행 중인 코드의 실행 컨텍스트다.

## 렉시컬 환경


> 렉시컬 환경은 식별자와 식별자에 바인딩된 값, 그리고 상위 스코프에 대한 참조를 기록하는 자료구조로 실행 컨텍스트를 구성하는 컴포넌트다. 렉시컬 환경은 스코프와 식별자를 관리한다.
>